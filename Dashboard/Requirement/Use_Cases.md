# 用例设计与活动图

## 操作记录

| 编号 |  修改时间  |    负责人    |              内容说明              |
| :--: | :--------: | :----------: | :--------------------------------: |
|  1   | 2019-05-23 | tang16340209 | 完成一二轮迭代用例设计与活动图上传 |
|  2   | 2019-06-21 | tang16340209 |      完善用例设计与活动图上传      |
|  3   | 2019-06-25 | tang16340209 |            添加详述用例            |

## 内容详情

### 1. 详述用例：任务发布到完成

**范围** ：闲钱宝客户端

**级别** ：用户目标

**主要参与者** ：任务发布者，任务接受者

**涉众及关注点**：

- 任务发布者： 希望能够便捷、清晰发布自己的任务，能够按照自己的意愿，定制化任务的份数需求，赏金金额，截止时间等。希望能够在中途对已经发布的任务进行取消。希望能够时刻跟进接单者任务的完成情况：包括联系接单者，催单等等。希望能够自己审核是否满意接单者的服务并且决定是否给予赏金，希望能够对特别差的接单者进行投诉。
- 任务接受者：希望能够便捷、清晰看到当前可以接受的任务。希望能够查看任务的详情内容。希望能够准确无误接受可完成的任务。希望能够接受委托之后可以选择放弃已接受的任务。希望能够跟进赏金状态，查看是否到账。希望能够对自己合理完成了任务但没有得到赏金的情况进行投诉。
- 超级管理员：希望能够方便，快捷，清晰地获取所有待审核的投诉单，审核投诉单只需求一个按键就能解决。希望拥有尽可能少的投诉单

**前置条件** ：用户已经注册并登陆了账号。用户注册时进行了邮箱验证，用户填写的个人信息相对真实

**成功保证（后置条件）** ：奶牛端实现完整的任务发布到完成，学生端实现完整的任务申请到获得赏金，超级管理员能够获取所有审核单并进行审核。

**主成功场景（或基本流程）** ：

1. 任务发布者通过点击发布任务进入任务发布界面
2. 任务发布者通过选择`任务类型`，填写`任务简介`，`任务详情`，`任务截止时间`，设置`赏金`和`份数`，填写`联系方式`之后发布任务
3. 任务发布者确认信息无误后可发布任务，支付`任务份数`*`单份任务赏金`的金额，系统对这部分金额进行冻结
4. 任务发布者通过点击`正在进行的任务`查看创建的任务
5. 任务发布者通过点击`查看任务详情`能够实现查看任务详细内容
6. 任务接单者通过点击`接单任务`获取详细的接单列表，能够实现`申请任务`
7. 任务接受者完成任务后，可点击确认`完成任务`
8. 任务发布者审核任务完成情况，点击审核成功，实现赏金（系统--->接单者）的转移

**扩展（或替代流程）**：

- 2a. 任务发布者在任务创建填写完部门信息后不小心退出了当前页面

  ​	i. 系统不对之前填写一半的记录进行保存

  ​	ii. 用户重新进入发布任务页面后，所有的任务内容需要重新输入

- 3a. 任务发布时用户的赏金币不足以支持当前的支付金额

  ​	i.提示用户余额不足，请先进行充值

  ​	ii.跳转回到任务发布页面

- 6a. 无法申请到的任务

  ​	i. 用户申请任务时，对应任务的需求量已经达到条件，弹出提示框告知用户

- 6b. 用户信誉值不足以申请任务

  ​     	i. 提示用户信誉值过低，无法申请当前任务，选择其他任务

- 8a. 奶牛审核任务时，判定审核不通过

  ​	i. 学生端无法获得赏金，邮件告知任务接单者

- *a. 任务发布者删除进行中的任务

  - 任务未被接单

    i. 删除任务成功，赏金返还

    ii. 任务从数据库中删除，学生端无法获取和申请该任务

  	 任务已经被接单	

    i. 提示任务存在进行中的订单，暂时无法删除，请完成订单后进行删除

- *b. 任务接受者认为无法完成任务，点击放弃任务

  ​	i. 接单的信息取消，邮箱告知任务发布者，通知任务状态信息变化

- *c. 任务接受者或任务发布者不满意对方

  ​	i. 选择特定的任务单，点击发起投诉，实现投诉

  ​	ii.填写投诉清单，上传证据图片，提交给奶牛端审核	

**特殊需求**：

- 无

**发生频率** ：可能会不断地发生。

**未决问题** ：

- 任务发布者可在已经发布但是未被接受的任务上进行修改
- 任务接受者放弃任务应该获得一定的惩罚

### 2.非正式用例设计

- 用户发布任务

  **主成功场景**：用户点击`创建任务`/`创建问卷`，进行任务的发布（这里讲述的是非问卷类型任务），选择任务类型，填写任务详情信息，设置任务份数，设置任务赏金，填写微信和手机号联系方式，点击发布任务，支付赏金，即可发布任务

  **交替场景**：

  - 如果系统检测到用户的余额不足以支付酬金，则任务发布失败并返回信息填写页面，用户修改任务报酬

  **活动图**：

  ​	![发布任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE2.png?raw=true)

  ​

  ​

- 查看和接受任务

  **主成功场景**：用户在可接任务列表中选择进入任务详情界面查看任务基本信息，点击查看任务详情可以查看任务的所有具体信息，点击申请任务进行任务申请。系统检查并更新任务接受数量额度，记录任务接受者的信息，修改任务的接受者列表信息，更新数据库信息。用户接受任务成功并查看任务的进一步信息。

  **交替场景**：

  - 用户点击接受任务时，系统检查任务接受数量额度已满或用户的评分不满足任务的要求时，用户接受任务失败，弹出提示信息并返回任务列表
  - 用户点击接受任务时，系统检查到该任务已不存在时，用户接受任务失败，弹出提示信息并返回任务列表 

  **活动图**：

  ![接受任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE3.png?raw=true)





- 学生端放弃任务

  **主成功场景**：用户进入已接受任务详情界面，选择放弃任务。系统修改任务接受者列表，更新数据库，将任务重新发布，并发送消息提醒任务发布者。

  **交替场景**：

  - 奶牛端对于任务接受者没有沟通就放弃任务的行为感到愤怒，可以点击投诉进行任务投诉

  **活动图**：

  ![放弃任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE4.png?raw=true)

  ​

  ​

- 奶牛端取消任务

  **主成功场景**：任务发布者进入已发布任务的任务详情界面，选择取消任务。系统检查任务接受者列表信息，删除该任务信息，将预支付的任务酬金返回至任务发布者账号中，更新数据库。

  **交替场景**：

  - 如果任务已经被其他用户接取，则任务发布者取消任务失败，提醒任务发布者与任务接受者联系沟通（任务接受者放弃任务后便可取消任务）。

  **活动图**：

  ![取消任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE5.png?raw=true)

  ​

  ​

- 学生端完成任务

  **主成功场景**：任务接受者完成任务后，进入任务的详情界面，提交任务完成信息。系统发送信息提醒任务发布者。

  **交替场景**：

  - 学生端认为无法完成任务，任务不适合自己，点击`放弃任务`可以选择放弃任务，系统更新任务状态信息，邮件告知任务发起者。

  **活动图**：

  ![完成任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE6.png?raw=true)

  ​

  ​

- 奶牛端审核任务

  **主成功场景**：任务发布者进入该任务的详情界面，查看任务接受者的完成信息，核实情况后，确认任务完成，审核任务是否通过

  **交替场景**：

  - 如果任务发布者审核不通过就邮箱告知任务接收者，任务赏金无法累加到任务接受者身上，奶牛端取消任务时，这部分任务赏金将返还给任务发起者

  **活动图**：

  ![审核任务活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE7.png?raw=true)

  ​

  ​


- 用户注册

  **主成功场景：** 新用户进入注册页面进行注册，输入注册的相关信息，完成邮箱验证，接着填写个人资料以及身份验证信息，提交给服务器进行认证，认证通过后，跳转至登录界面进行登录。

  **交替场景：**

  ​	如果服务器对用户身份认证未通过，用户可以重新填写个人信息进行注册。

  ​	邮箱验证采用邮箱发送验证码的方式，用户无法填写验证码时可以重新输入正确邮箱进行注册

  **活动图：**

  ![注册逻辑活动图](https://github.com/sysu-change/Dashboard/blob/master/image/%E6%B4%BB%E5%8A%A8%E5%9B%BE8.png?raw=true)








### 3.其他用例设计

#### 一轮迭代相关用例设计：



用户相关逻辑：

- 修改个人信息：用户可以点击`资料编辑`进行用户名、年龄、专业、等个人信息的完善和修改。
- 账户充值：用户点击充值，选择充值金额，扫码二维码付款，付款成功就可以获得等量闲钱币。
- 账户提现：用户点击提现，选择提现金额，输入支付宝绑定手机号码，可以将闲钱币提现到支付宝账户。
- 邮箱验证：用户使用邮箱绑定账号，注册时系统后台往用户邮箱发送四位验证码，用户填写验证码以通过验证。



任务相关逻辑：

- 发布任务：用户点击`发布任务`进行任务发布，第一轮迭代支持的任务类型为问卷调查类型，用户需要创建和编辑问卷，设置回收问卷份数，设置单份悬赏金额后可以发放问卷，问卷发布的同时平台扣除相应的赏金币，若余额不足，问卷发布不成功。问卷一经发布，不允许再编辑，但可删除，将返回剩余的赏金币，已经被答题者获得的赏金币不做返还。
- 接受任务：用户点击`兼职任务`进入兼职任务页面，可以接受任务，第一轮迭代只提供问卷调查服务，故学生端只能填写问卷，每次填写问卷将获得一定的回报。每一份问卷有一定的点击进入任务详情，点击接单按钮可以开始执行任务，完成任务后会获得一定闲钱币。



问卷相关逻辑：

除了上文提到的发布问卷和填写问卷，还应该包括以下逻辑：

- 预览问卷：奶牛端能对编辑后保存的问卷或者发布中的问卷进行预览，以校正自己编辑的部分错误。
- 查看问卷数据：奶牛端用户点击`查看数据`进入问卷数据页面，页面显示该问卷的所有有效作答情况，具体包括{答卷编号，答题者，答题时间，作答答案}，点击作答答案跳转到具体问卷答案页面，供用户进行数据分析。
- 编辑问卷：可对已创建但未发布的问卷进行修改，可增加，删减问题，设置是否必答，修改回收份数，修改单份悬赏金额等功能，已经处于发布中的问卷没有这项功能。
- 删除问卷：删除问卷的前提是所有的作答都被审核过，也就是不存在债务关系的前提下可以删除问卷，如若问卷还有一定的赏金币，则返还给奶牛用户。
- 问卷审核：奶牛端用户点击`查看数据`进入问卷数据页面，页面显示该问卷的所有有效作答情况，具体包括{答卷编号，答题者，答题时间，作答答案}，点击作答答案跳转到具体问卷答案页面，用户查看答卷，选择是否通过审核，通过审核将发放一定的赏金币给作答者。
- 查看答卷：奶牛端用户点击`查看数据`进入问卷数据页面，点击每一份答卷的答案部分能够进入详细的答卷页面，答卷页面显示学生端的答卷信息。








#### 二轮迭代相关用例设计：

奶牛端：

- 发布任务：奶牛端点击创建任务，能够实现创建普通任务，选择任务类型（取快递业务，运动业务，学习业务，求夸业务，其他业务），填写任务简介，任务详情，选择任务截止时间，填写联系方式（手机号，微信号，都必填），设置发布份数和单任务赏金，即可发布任务
- 删除任务：奶牛端创建任务之后，可以点击删除任务，对于未被接单的任务，则能直接删除，给出提示信息（任务删除成功），对于已经被接单的任务，给出提示信息（任务已经被接单，不能单向删除任务）
- 查看任务详情：用户争对具体的任务，点击查看任务详情能够查看该任务的详细情况信息
- 查看正在进行的任务：用户点击其他任务，将显示用户创建的正在进行中的任务，显示任务编号，任务信息，任务接单人数，任务需求人数，任务赏金。点击`查看任务详情`能看到详细的任务信息。
- 查看已完成的任务：用户查看已完成的任务，将能显示所有自己发布的并且学生端标记已经完成的任务。（注意只有已完成的任务才能进行审核，所以这个完成指的是学生端标记任务完成，而不是奶牛端整个任务结束，奶牛端在学生标记任务完成之后还要进行审核）
- 联系接单者：获得接单者的个人信息资料，非全部用户资料（昵称，学号，手机号，邮箱）
- 审核任务：学生端完成任务之后，任务状态标记为已完成，奶牛通过查看已完成的任务，可以对任务进行审核，审核允许通过和不通过，任务审核状态有三种（未审核，审核通过，审核不通过），审核成功与否都将通过邮箱告知任务接受者
- 投诉交易单：奶牛对已经完成的任务能够进行投诉，填写投诉的任务编号（前端自动写进），投诉人（前端自动写进），被投诉人，投诉内容，上传先关证据图片，之后即可点击投诉。用户发起投诉时，系统将通过邮箱的方式告知被投诉者。



学生端：

- 挑选任务：学生能够查看到目前系统所有的其他类型任务（任务编号，业务类型，业务简介，业务需求量，业务赏金），
- 查看任务详情：用户争对具体的任务，点击查看任务详情能够查看该任务的详细情况信息（任务编号，业务类型，业务简介，业务详情，业务截止时间，业务联系人手机号，业务联系人微信）
- 申请任务：用户可以对任务进行任务申请，对于需求量只有一份的任务，当任务被申请时，其他用户将不能获得该任务信息，用户需求量为多份时，对应需求量减1，其他用户可以获得该任务信息。任务被申请时，将通过邮箱的方式告知任务发起者，同时也发送一份邮箱信息给任务接受者提醒记得完成任务
- 放弃任务：用户可以放弃完成不了的任务， 放弃任务不需要审核，同时也不获得赏金，放弃任务之后，任务的需求量应该回退一步，可以重新出现在用户的挑选任务列表里面，放弃任务将通过邮箱的方式告知任务发起者
- 完成任务：用户点击完成任务，更新任务状态，标记成已完成的任务，之后奶牛端对其进行审核，决定是否发放赏金。完成任务将通过邮箱的方式告知任务发起者，提醒其记得进行任务审核
- 查看正在进行的任务：用户点击`正在进行`按钮，查看自己正在进行的任务，可以再该页面选择查看任务信息，放弃任务，完成任务
- 查看已完成的任务：用户点击`已完成`按钮，查看已完成的任务，查看赏金是否到账，决定是否投诉。
- 投诉交易单：用户对已经完成的任务能够进行投诉，填写投诉的任务编号（前端自动写进），投诉人（前端自动写进），被投诉人，投诉内容，上传先关证据图片，之后即可点击投诉。用户发起投诉时，系统将通过邮箱的方式告知被投诉者。



超级管理员：

- 投诉单审核：对用户填写的投诉单进行审核，审核可以通过与不通过，审核通过将对被投诉人进行扣除信誉积分的惩罚，并且邮箱告知被投诉人。审核不通过要邮箱告知投诉者。













